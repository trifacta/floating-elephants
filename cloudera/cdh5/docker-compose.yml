version: '2'

services:
  dns:
    build: dns
    ports:
      - "53:53"
      - "53:53/udp"

  zookeeper:
    build: zookeeper

  hdfsnamenode:
    build: hdfs-namenode
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  yarnresourcemanager:
    build: yarn-resource-manager
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  mapreducehistory:
    build: mapreduce-history
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  clusternode:
    build: cluster-node
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  hiveserver:
    build: hive-server
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  hivemysql:
    image: "mysql:latest"
    environment:
      MYSQL_ROOT_PASSWORD: floating
      MYSQL_DATABASE: metastore
      MYSQL_USER: hive
      MYSQL_PASSWORD: elephants

  hivemetastore:
    build: hive-metastore
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"

  hue:
    build: hue
    volumes:
      - "./conf.docker_cluster:/etc/hadoop/conf.docker_cluster:ro"
      - "./conf.hue:/etc/hue/conf:ro"
